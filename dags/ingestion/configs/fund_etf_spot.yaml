target: fund_etf_spot
description: "ETF Spot data from AkShare"
schedule_interval: "@daily"
start_date: "2024-01-01"

# 1. Split Strategy
partitioner:
  # Single snapshot task, no partitioning needed
  class: "dags.ingestion.standard.partitioners.SingleJobPartitioner"

# 2. Extraction Logic
extractor:
  class: "dags.ingestion.standard.extractors.SimpleFunctionExtractor"
  kwargs:
    function_ref: "dags.ingestion.impl.etf.fetch_fund_etf_spot:fetch_fund_etf_spot"

# 3. Compaction/Storage
compactor:
  class: "dags.ingestion.standard.compactors.StandardS3Compactor"
  kwargs:
    bucket: "stock-data"
    prefix_template: "lake/raw/daily/fund_etf_spot"
    file_format: "csv"
    dedup_cols: ["symbol", "trade_date"]
    partition_column: "trade_date"
